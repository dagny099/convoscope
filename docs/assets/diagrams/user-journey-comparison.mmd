%% User Journey: Before vs After Comparison
%% High-resolution version for detailed inspection
flowchart TB
    subgraph "❌ BEFORE: Single Provider Failure"
        A1[👤 User sends message] --> B1[🤖 OpenAI API Call]
        B1 --> C1{API Available?}
        C1 -->|Yes| D1[✅ Response delivered]
        C1 -->|No| E1[💥 Complete failure]
        E1 --> F1[😞 User sees error]
        F1 --> G1[🚫 Chat becomes unusable]
        
        style E1 fill:#ffcdd2,stroke:#d32f2f,stroke-width:3px
        style F1 fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
        style G1 fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    end
    
    subgraph "✅ AFTER: Multi-Provider Resilience"
        A2[👤 User sends message] --> B2[🧠 Intelligent Router]
        B2 --> C2{OpenAI Available?}
        C2 -->|Yes| D2[🔥 OpenAI Response]
        C2 -->|No| E2[🔄 Auto-fallback to Anthropic]
        E2 --> F2{Anthropic Available?}
        F2 -->|Yes| G2[🧠 Claude Response]
        F2 -->|No| H2[🔄 Auto-fallback to Gemini]
        H2 --> I2[🌟 Gemini Response]
        D2 --> J2[✅ Seamless user experience]
        G2 --> J2
        I2 --> J2
        
        style B2 fill:#e8f5e8,stroke:#4caf50,stroke-width:3px
        style E2 fill:#fff3e0,stroke:#ff9800,stroke-width:2px
        style H2 fill:#fff3e0,stroke:#ff9800,stroke-width:2px
        style J2 fill:#e8f5e8,stroke:#4caf50,stroke-width:3px
    end
    
    %% Visual separation and branding
    classDef userAction fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef success fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef failure fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    classDef fallback fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef intelligent fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    
    class A1,A2 userAction
    class D1,D2,G2,I2,J2 success
    class E1,F1,G1 failure  
    class E2,H2 fallback
    class B2 intelligent